@using Laba4.Models
@using Laba4.ViewModels
@using Microsoft.AspNetCore.Identity

@model IEnumerable<UserViewModel>

<h2>Users List</h2>
<a asp-action="Roles">Roles</a>
<table class="table">
    @foreach (var user in Model)
    {
                <tr>
                    <td>@user.Email</td>
                    <td>@if(user.UserObj != null){
                           <p>@user.UserObj.FullName</p> 
                        }
                    </td>
                    <td>@user.Role</td>
                    <td>@{
                            if (@user.Role == "Recipient")
                            {
                                               <a asp-controller="Recipients" asp-action="Edit" asp-route-id="@user.UserObj.Id">Edit</a>
                                   
                            }
                            else if (@user.Role == "Employee")
                            {
                                               <a asp-controller="Employees" asp-action="Edit" asp-route-id="@user.UserObj.Id">Edit</a>

                            }
                        }
                    <td>@{
                            if (@user.Role == "Recipient")
                            {
                                               <a asp-controller="Recipients" asp-action="Details" asp-route-id="@user.UserObj.Id">Details</a>
                                   
                            }
                            else if (@user.Role == "Employee")
                            {
                                               <a asp-controller="Employees" asp-action="Details" asp-route-id="@user.UserObj.Id">Details</a>  
                            }
                        }
                    </td>
                    <td>
                    @{
                        if (user.Role != "Admin")
                        {
                                                <form asp-action="DeleteUser" asp-route-id="@user.Id" method="post">
                                                    <button type="submit" class="btn btn-link">
                                                        Delete
                                                    </button>
                                                </form>

                        }
                    }
                    </td>
                        
                </tr>
    }
</table>

